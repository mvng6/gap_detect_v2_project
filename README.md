# Mobile-Cobot Integrated Control System

**ëª¨ë°”ì¼ ë¡œë´‡ê³¼ í˜‘ë™ ë¡œë´‡ì˜ í†µí•© ì œì–´ ì‹œìŠ¤í…œ**

[![ROS Version](https://img.shields.io/badge/ROS-Noetic-blue)](http://wiki.ros.org/noetic)
[![Python Version](https://img.shields.io/badge/Python-3.8+-green)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-KATECH-orange)](https://www.katech.re.kr)

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

ë³¸ í”„ë¡œì íŠ¸ëŠ” **ëª¨ë°”ì¼ ë¡œë´‡**ê³¼ **ë‘ì‚° í˜‘ë™ ë¡œë´‡(Doosan A0912)**ì„ ì¤‘ì•™ ê´€ì œ ì‹œìŠ¤í…œì„ í†µí•´ ìˆœì°¨ì ìœ¼ë¡œ ì œì–´í•˜ëŠ” í†µí•© ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ROS 1 Noetic ê¸°ë°˜ìœ¼ë¡œ Topic í†µì‹ ì„ í™œìš©í•˜ì—¬ ë‘ ë¡œë´‡ì˜ í˜‘ì—… ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- âœ… **ì¤‘ì•™ ê´€ì œ ì‹œìŠ¤í…œ**: ë‹¨ì¼ ë…¸ë“œì—ì„œ ë‘ ë¡œë´‡ì„ ìˆœì°¨ì ìœ¼ë¡œ ì œì–´
- âœ… **ìë™ ì´ˆê¸°í™”**: ë¡œë´‡ ì—°ê²° ë° ì„œë³´ ì˜¨ ìƒíƒœ ìë™ ê°ì§€
- âœ… **ì™•ë³µ ì‹œí€€ìŠ¤**: ëª¨ë°”ì¼ ì „ì§„ â†’ í˜‘ë™ë¡œë´‡ ì‘ì—… â†’ ëª¨ë°”ì¼ ë³µê·€ â†’ í˜‘ë™ë¡œë´‡ í™ˆ
- âœ… **ìƒíƒœ ëª¨ë‹ˆí„°ë§**: ì‹¤ì‹œê°„ ë¡œë´‡ ìƒíƒœ í™•ì¸ ë° ì—ëŸ¬ ì²˜ë¦¬
- âœ… **íŒŒë¼ë¯¸í„° ì œì–´**: ì´ë™ ê±°ë¦¬, ì†ë„ ë“± ëŸ°íƒ€ì„ ì„¤ì • ê°€ëŠ¥

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Central Coordinator Node              â”‚
â”‚         (ì¤‘ì•™ ê´€ì œ ë…¸ë“œ)                          â”‚
â”‚                                                 â”‚
â”‚  [ì´ˆê¸°í™”] ë‘ì‚° ë¡œë´‡ STANDBY í™•ì¸ â†’ í™ˆ ìœ„ì¹˜        â”‚
â”‚  [ì‚¬ì´í´]                                        â”‚
â”‚    1. ëª¨ë°”ì¼ ì „ì§„ (0.3m)                         â”‚
â”‚    2. ë‘ì‚° ì‘ì—… ìì„¸                              â”‚
â”‚    3. ëª¨ë°”ì¼ í›„ì§„ (ë³µê·€)                          â”‚
â”‚    4. ë‘ì‚° í™ˆ ìœ„ì¹˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                            â”‚
         â†“ (Topic)                    â†“ (Topic)
    /mobile/cmd                  /katech/robot_command
         â”‚                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mobile Robot Node  â”‚      â”‚ Doosan Robot Node     â”‚
â”‚                    â”‚      â”‚                       â”‚
â”‚ - ë¹„ë™ê¸° ì œì–´       â”‚      â”‚ - ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸    â”‚
â”‚ - Odometry í”¼ë“œë°±   â”‚      â”‚ - ìƒíƒœ ë°œí–‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                            â†‘
    /mobile/status             /doosan/status
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
              (ìƒíƒœ êµ¬ë…)
```

---

## ğŸ“¡ í†µì‹  ë°©ì‹

### ROS Topic ê¸°ë°˜ í†µì‹ 

ë³¸ ì‹œìŠ¤í…œì€ **ROS Topic í†µì‹ **ì„ ì‚¬ìš©í•˜ì—¬ ì¤‘ì•™ ê´€ì œ ë…¸ë“œì™€ ê° ë¡œë´‡ ê°„ì˜ ëª…ë ¹/ìƒíƒœë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤.

#### ğŸ“» Topic í†µì‹ ì´ë€?

**ë¼ë””ì˜¤ ë°©ì†¡**ì²˜ëŸ¼ ì‘ë™í•˜ëŠ” ì¼ë°©í–¥ í†µì‹  ë°©ì‹ì…ë‹ˆë‹¤:

```
[ë°œí–‰ì] â”€â”€â”€â”€â”€â”€â–º ğŸ“» Topic Channel â”€â”€â”€â”€â”€â”€â–º [êµ¬ë…ìë“¤]
          (ë©”ì‹œì§€ ë°œí–‰)              (ë©”ì‹œì§€ ìˆ˜ì‹ )
```

#### ğŸ¯ ìš°ë¦¬ ì‹œìŠ¤í…œì˜ í†µì‹  êµ¬ì¡°

```
     ì¤‘ì•™ ê´€ì œ ë…¸ë“œ
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
ëª…ë ¹ ë°œí–‰   ìƒíƒœ êµ¬ë…
    â†“         â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  /mobile/cmd        â”‚ â†’ ëª¨ë°”ì¼ ë¡œë´‡ì—ê²Œ ëª…ë ¹
â”‚  /katech/robot_cmd  â”‚ â†’ ë‘ì‚° ë¡œë´‡ì—ê²Œ ëª…ë ¹
â”‚  /mobile/status     â”‚ â† ëª¨ë°”ì¼ ë¡œë´‡ ìƒíƒœ ìˆ˜ì‹ 
â”‚  /doosan/status     â”‚ â† ë‘ì‚° ë¡œë´‡ ìƒíƒœ ìˆ˜ì‹ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### âœ… Topic í†µì‹ ì˜ ì¥ì 

| íŠ¹ì§• | ì„¤ëª… |
|------|------|
| ğŸš€ **ë¹ ë¥¸ ì‘ë‹µ** | ë‹µì¥ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šì•„ ì¦‰ê° ë‹¤ìŒ ì‘ì—… ê°€ëŠ¥ |
| ğŸ”„ **ë¹„ë™ê¸° ì²˜ë¦¬** | ë¡œë´‡ì´ ì‘ì—… ì¤‘ì—ë„ ìƒíƒœë¥¼ ê³„ì† í™•ì¸ ê°€ëŠ¥ |
| ğŸ“¡ **ë©€í‹°ìºìŠ¤íŠ¸** | í•˜ë‚˜ì˜ ëª…ë ¹ì„ ì—¬ëŸ¬ ë¡œë´‡ì—ê²Œ ë™ì‹œ ì „ë‹¬ ê°€ëŠ¥ |
| ğŸ›ï¸ **ëŠìŠ¨í•œ ê²°í•©** | ë¡œë´‡ì´ ì—°ê²° í•´ì œë˜ì–´ë„ ì‹œìŠ¤í…œ ì „ì²´ê°€ ë©ˆì¶”ì§€ ì•ŠìŒ |

#### ğŸ”„ ì‹¤ì œ ë™ì‘ íë¦„

```
1ï¸âƒ£ ì¤‘ì•™ ê´€ì œ: "ëª¨ë°”ì¼ì•„, 0.3m ì „ì§„!" 
   â†’ /mobile/cmd ë°œí–‰

2ï¸âƒ£ ëª¨ë°”ì¼ ë¡œë´‡: ëª…ë ¹ ìˆ˜ì‹  â†’ ì´ë™ ì‹œì‘
   â†’ /mobile/status: "MOVING" ë°œí–‰

3ï¸âƒ£ ì¤‘ì•™ ê´€ì œ: ìƒíƒœ í™•ì¸ â†’ ì™„ë£Œ ëŒ€ê¸°
   (ì´ ì‹œê°„ì— ë‹¤ë¥¸ ì‘ì—… ê°€ëŠ¥!)

4ï¸âƒ£ ëª¨ë°”ì¼ ë¡œë´‡: ì´ë™ ì™„ë£Œ
   â†’ /mobile/status: "COMPLETED" ë°œí–‰

5ï¸âƒ£ ì¤‘ì•™ ê´€ì œ: ì™„ë£Œ í™•ì¸ â†’ ë‹¤ìŒ ë¡œë´‡ ì œì–´
```

> ğŸ’¡ **ì™œ Service/Actionì´ ì•„ë‹Œ Topicì„?**  
> ServiceëŠ” ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë¸”ë¡œí‚¹ë˜ê³ , Actionì€ êµ¬í˜„ì´ ë³µì¡í•©ë‹ˆë‹¤.  
> ìš°ë¦¬ ì‹œìŠ¤í…œì€ **ê°„ë‹¨í•˜ê³  ë¹ ë¥¸ ìˆœì°¨ ì œì–´**ê°€ ëª©ì ì´ë¯€ë¡œ Topicì´ ìµœì ì…ë‹ˆë‹¤.

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. í™˜ê²½ ìš”êµ¬ì‚¬í•­

- **Host OS**: Ubuntu 24.04 LTS
- **ROS í™˜ê²½**: Docker + ROS Noetic
- **ë¡œë´‡ í•˜ë“œì›¨ì–´**:
  - Doosan A0912 (IP: 192.168.137.100)
  - Mobile Robot (IP: 169.254.128.2)

### 2. ì‹¤í–‰

```bash
# Docker ì»¨í…Œì´ë„ˆ ì ‘ì†
docker exec -it my_noetic_ws bash

# í™˜ê²½ ì„¤ì •
cd ~/catkin_ws
source devel/setup.bash

# í†µí•© ì‹œìŠ¤í…œ ì‹¤í–‰
roslaunch central_coordinator integrated_system.launch
```

### 3. íŒŒë¼ë¯¸í„° ë³€ê²½

```bash
# ì´ë™ ê±°ë¦¬ ë° ì†ë„ ë³€ê²½
roslaunch central_coordinator integrated_system.launch \
    mobile_distance:=0.5 \
    mobile_speed:=0.3 \
    cycle_delay:=10.0
```

---

## ğŸ“¦ íŒ¨í‚¤ì§€ êµ¬ì¡°

```
robot_ws/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ central_coordinator/    # ì¤‘ì•™ ê´€ì œ ë…¸ë“œ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ coordinator_node.py
â”‚   â”‚   â””â”€â”€ launch/
â”‚   â”‚       â””â”€â”€ integrated_system.launch
â”‚   â”‚
â”‚   â”œâ”€â”€ doosan_helper/          # ë‘ì‚° ë¡œë´‡ ì œì–´
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ move_robot_node.cpp
â”‚   â”‚   â”‚   â”œâ”€â”€ trigger_home_node.cpp
â”‚   â”‚   â”‚   â”œâ”€â”€ trigger_one_node.cpp
â”‚   â”‚   â”‚   â””â”€â”€ trigger_zero_node.cpp
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â””â”€â”€ mobile_robot_control/   # ëª¨ë°”ì¼ ë¡œë´‡ ì œì–´
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ move_mobile_robot_node.py
â”‚       â”‚   â””â”€â”€ mobile_robot_twist_control.py
â”‚       â””â”€â”€ README.md
â”‚
â””â”€â”€ docs/                       # ë¬¸ì„œ
    â”œâ”€â”€ ENVIRONMENT_SETUP.md    # í™˜ê²½ êµ¬ì¶• ê°€ì´ë“œ
    â””â”€â”€ INTEGRATION_GUIDE.md    # í†µí•© ê°œë°œ ê°€ì´ë“œ
```

---

## ğŸ“– ë¬¸ì„œ

### ì‚¬ìš©ì ê°€ì´ë“œ
- [í™˜ê²½ êµ¬ì¶• ê°€ì´ë“œ](docs/ENVIRONMENT_SETUP.md) - Docker ë° ROS í™˜ê²½ ì„¤ì •
- [í†µí•© ê°œë°œ ê°€ì´ë“œ](docs/INTEGRATION_GUIDE.md) - ì‹œìŠ¤í…œ ê°œë°œ ë° í™•ì¥ ë°©ë²•

### íŒ¨í‚¤ì§€ë³„ ë¬¸ì„œ
- [central_coordinator](src/central_coordinator/README.md) - ì¤‘ì•™ ê´€ì œ ë…¸ë“œ
- [doosan_helper](src/doosan_helper/README.md) - ë‘ì‚° ë¡œë´‡ ì œì–´
- [mobile_robot_control](src/mobile_robot_control/README.md) - ëª¨ë°”ì¼ ë¡œë´‡ ì œì–´

---

## ğŸ”§ ì£¼ìš” ROS í† í”½

| í† í”½ ì´ë¦„ | ë©”ì‹œì§€ íƒ€ì… | ì„¤ëª… |
|----------|-----------|------|
| `/mobile/cmd` | `std_msgs/Float64MultiArray` | ëª¨ë°”ì¼ ë¡œë´‡ ì´ë™ ëª…ë ¹ [distance, speed] |
| `/mobile/status` | `std_msgs/String` | ëª¨ë°”ì¼ ë¡œë´‡ ìƒíƒœ (IDLE, MOVING, COMPLETED, ERROR) |
| `/katech/robot_command` | `std_msgs/Int32` | ë‘ì‚° ë¡œë´‡ ìì„¸ ëª…ë ¹ (0, 1, 99) |
| `/doosan/status` | `std_msgs/String` | ë‘ì‚° ë¡œë´‡ ìƒíƒœ (IDLE, MOVING, COMPLETED, ERROR) |
| `/dsr01a0912/state` | `dsr_msgs/RobotState` | ë‘ì‚° ë¡œë´‡ ì‹œìŠ¤í…œ ìƒíƒœ (ë“œë¼ì´ë²„ ë°œí–‰) |

---

## ğŸ”‹ ìœ í‹¸ë¦¬í‹°

### ë°°í„°ë¦¬ ì”ëŸ‰ í™•ì¸

```bash
# ëª¨ë°”ì¼ ë¡œë´‡ ë°°í„°ë¦¬ í™•ì¸
rosrun mobile_robot_control battery_check.py
```

ì¶œë ¥: ë°°í„°ë¦¬ ì”ëŸ‰ì„ ìƒ‰ìƒ ë§‰ëŒ€ ê·¸ë˜í”„ë¡œ í‘œì‹œ (80%â†‘: ì´ˆë¡, 50~79%: ì²­ë¡, 20~49%: ë…¸ë€ìƒ‰, 20%â†“: ë¹¨ê°•)

---

## ğŸ› ï¸ ê°œë°œ í™˜ê²½

### ë¹Œë“œ
```bash
cd ~/catkin_ws
catkin_make
source devel/setup.bash
```

### ë””ë²„ê¹…
```bash
# ìƒíƒœ ëª¨ë‹ˆí„°ë§
rostopic echo /mobile/status
rostopic echo /doosan/status

# ìˆ˜ë™ ëª…ë ¹ í…ŒìŠ¤íŠ¸
rostopic pub /mobile/cmd std_msgs/Float64MultiArray "data: [0.3, 0.2]"
rostopic pub /katech/robot_command std_msgs/Int32 "data: 99"

# ë…¸ë“œ ê·¸ë˜í”„ í™•ì¸
rqt_graph
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë‘ì‚° ë¡œë´‡ì´ SAFE_OFF ìƒíƒœì—ì„œ ë©ˆì¶¤
```
âš ï¸ í‹°ì¹˜ íœë˜íŠ¸ì—ì„œ 'ì„œë³´ ì˜¨(Servo On)' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”
```

### ëª¨ë°”ì¼ ë¡œë´‡ ì—°ê²° ì‹¤íŒ¨
```bash
# IP í™•ì¸
ping 169.254.128.2

# ë¡œê·¸ í™•ì¸
rosnode info /mobile_robot_ros_node
```

---

## ğŸ“ ë¼ì´ì„ ìŠ¤ ë° ì €ì‘ê¶Œ

**Copyright Â© 2025 KATECH (Korea Automotive Technology Institute)**  
**Smart Manufacturing Technology Research Center**

**Author**: LDJ (Dongjun Lee)  
**Email**: djlee2@katech.re.kr

ë³¸ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” í•œêµ­ìë™ì°¨ì—°êµ¬ì› ìŠ¤ë§ˆíŠ¸ì œì¡°ê¸°ìˆ ì—°êµ¬ì„¼í„°ì—ì„œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.  
ìƒì—…ì  ì‚¬ìš© ë° ì¬ë°°í¬ ì‹œ ì‚¬ì „ ìŠ¹ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.

---

## ğŸ¤ ê¸°ì—¬

ë³¸ í”„ë¡œì íŠ¸ëŠ” KATECH ë‚´ë¶€ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.  
ë¬¸ì˜ ì‚¬í•­ì€ djlee2@katech.re.krë¡œ ì—°ë½ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

---

## ğŸ“ˆ ë²„ì „ íˆìŠ¤í† ë¦¬

### v1.0.0 (2025-11-03)
- âœ… ì¤‘ì•™ ê´€ì œ ì‹œìŠ¤í…œ êµ¬ì¶• ì™„ë£Œ
- âœ… ëª¨ë°”ì¼-í˜‘ë™ë¡œë´‡ ì™•ë³µ ì‹œí€€ìŠ¤ êµ¬í˜„
- âœ… ìë™ ì´ˆê¸°í™” ë° ìƒíƒœ ê°ì§€ ê¸°ëŠ¥
- âœ… ROS Topic ê¸°ë°˜ í†µì‹  êµ¬ì¡° í™•ë¦½

---

**Built with â¤ï¸ by KATECH Smart Manufacturing Technology Research Center**
