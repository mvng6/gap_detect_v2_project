<?xml version="1.0"?>
<launch>
    <!-- ==================== 파라미터 설정 ==================== -->
    
    <!-- 두산 로봇 설정 -->
    <arg name="doosan_model" default="a0912" doc="두산 로봇 모델명"/>
    <arg name="doosan_host" default="192.168.137.100" doc="두산 컨트롤러 IP"/>
    
    <!-- 모바일 로봇 설정 -->
    <arg name="mobile_distance" default="0.3" doc="모바일 이동 거리 (m)"/>
    <arg name="mobile_speed" default="0.2" doc="모바일 이동 속도 (m/s)"/>
    
    <!-- 사이클 설정 -->
    <arg name="cycle_delay" default="5.0" doc="사이클 간 대기 시간 (초)"/>
    
    
    <!-- ==================== 두산 로봇 시스템 ==================== -->
    
    <!-- 1. 두산 로봇 드라이버 실행 -->
    <include file="$(find dsr_launcher)/launch/single_robot.launch">
        <arg name="model" value="$(arg doosan_model)"/>
        <arg name="mode" value="real"/>
        <arg name="host" value="$(arg doosan_host)"/>
    </include>
    
    <!-- 2. 두산 로봇 명령 수신 노드 (기존 코드 사용) -->
    <node name="katech_move_robot_node" pkg="doosan_helper" type="move_robot_node" output="screen"/>
    
    
    <!-- ==================== 모바일 로봇 시스템 ==================== -->
    
    <!-- 3. 모바일 로봇 ROS 노드 -->
    <env name="PYTHONPATH" value="$(find mobile_robot_control)/src:$(env PYTHONPATH)" />
    <node name="katech_mobile_robot_ros_node" pkg="mobile_robot_control" type="move_mobile_robot_node.py" output="screen" />
    
    
    <!-- ==================== 중앙 관제 노드 ==================== -->
    
    <!-- 4. 중앙 관제 노드 -->
    <node name="katech_central_coordinator" pkg="central_coordinator" type="coordinator_node.py" output="screen">
        <!-- 파라미터 전달 -->
        <param name="mobile_distance" value="$(arg mobile_distance)"/>
        <param name="mobile_speed" value="$(arg mobile_speed)"/>
        <param name="cycle_delay" value="$(arg cycle_delay)"/>
    </node>
    
</launch>

